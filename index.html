<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EarnQuick Premium</title>
    
    <script src='//libtl.com/sdk.js' data-zone='10603637' data-sdk='show_10603637'></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        :root {
            --primary: #00f2fe;
            --secondary: #4facfe;
            --bg: #0b0f1a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --accent: #f43f5e;
        }

        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background: radial-gradient(circle at top, #1e293b 0%, #0b0f1a 100%);
            color: #ffffff;
            margin: 0;
            padding-bottom: 110px;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶®‡¶ø‡¶â‡¶ú ‡¶ü‡¶ø‡¶ï‡¶æ‡¶∞ */
        .news-ticker {
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            color: #000;
            padding: 8px 0;
            font-size: 13px;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(0, 242, 254, 0.3);
        }

        .header {
            padding: 40px 20px 20px;
            text-align: center;
        }

        .profile-container {
            position: relative;
            display: inline-block;
        }

        .user-pic {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            box-shadow: 0 0 25px rgba(0, 242, 254, 0.5);
            border: 4px solid #0b0f1a;
        }

        .status-dot {
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 15px;
            height: 15px;
            background: #22c55e;
            border-radius: 50%;
            border: 3px solid #0b0f1a;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }

        .balance-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding: 0 20px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 24px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            text-align: center;
        }

        .stat-card span { font-size: 12px; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px; }
        .stat-card h2 { margin: 5px 0 0; font-size: 26px; color: var(--primary); }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 0 20px;
        }

        .action-btn {
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 24px;
            padding: 25px 15px;
            text-align: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .action-btn:active { transform: scale(0.92); background: rgba(255, 255, 255, 0.1); }

        .action-btn i { font-size: 32px; margin-bottom: 12px; display: block; background: linear-gradient(to bottom, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .btn-watch { border-bottom: 4px solid var(--accent); }
        .btn-withdraw { border-bottom: 4px solid #22c55e; }
        .btn-ref { border-bottom: 4px solid var(--secondary); }
        .btn-sync { border-bottom: 4px solid #eab308; }

        /* ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° */
        .ad-dock {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(11, 15, 26, 0.95);
            backdrop-filter: blur(15px);
            padding: 10px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
            min-height: 60px;
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body>

<div class="news-ticker">
    <marquee scrollamount="5">üî• EarnQuick ‡¶™‡ßç‡¶∞‡ßã-‡¶§‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ! ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¨‡ßá‡¶∂‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡ßÅ‡¶ù‡ßá ‡¶®‡¶ø‡¶®‡•§ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶ñ‡¶® ‡¶¶‡ßç‡¶¨‡¶ø‡¶ó‡ßÅ‡¶£! üî•</marquee>
</div>

<div class="header">
    <div class="profile-container">
        <div id="u_pic" class="user-pic">?</div>
        <div class="status-dot"></div>
    </div>
    <h1 id="u_name" style="font-size: 22px; margin-top: 15px; letter-spacing: 0.5px;">User Name</h1>
    <p style="font-size: 12px; color: #64748b; margin-top: -5px;">ID: <span id="u_id">000000</span></p>
</div>

<div class="balance-container">
    <div class="stat-card">
        <span>Current Points</span>
        <h2 id="bal">0.00</h2>
    </div>
    <div class="stat-card">
        <span>Total Refs</span>
        <h2 id="ref">0</h2>
    </div>
</div>

<div class="menu-grid">
    <div class="action-btn btn-watch" onclick="watchAd()">
        <i class="fas fa-play-circle" style="background: linear-gradient(to bottom, #fb7185, var(--accent)); -webkit-background-clip: text;"></i>
        <span style="font-weight: 600;">Watch Ad</span>
    </div>
    <div class="action-btn btn-withdraw" onclick="tg.showAlert('Withdraw functionality is opening soon!')">
        <i class="fas fa-wallet" style="background: linear-gradient(to bottom, #4ade80, #22c55e); -webkit-background-clip: text;"></i>
        <span style="font-weight: 600;">Withdraw</span>
    </div>
    <div class="action-btn btn-ref" onclick="copyRef()">
        <i class="fas fa-users" style="background: linear-gradient(to bottom, var(--primary), var(--secondary)); -webkit-background-clip: text;"></i>
        <span style="font-weight: 600;">Referral</span>
    </div>
    <div class="action-btn btn-sync" onclick="syncData()">
        <i class="fas fa-rotate" style="background: linear-gradient(to bottom, #fde047, #eab308); -webkit-background-clip: text;"></i>
        <span style="font-weight: 600;">Sync Now</span>
    </div>
</div>

<div class="ad-dock">
    <script type="text/javascript" src="//alwingulla.com/tag.min.js" data-zone="10603687" async data-cfasync="false"></script>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    const user = tg.initDataUnsafe.user || { id: 0, first_name: "Guest" };
    const BACKEND = "https://earnquick-backend.onrender.com";

    // ‡¶∞‡¶ø‡ßü‡ßá‡¶≤ ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶´‡ßá‡¶ö‡¶ø‡¶Ç
    async function loadData() {
        if(!user.id) return;
        document.getElementById('u_name').innerText = user.first_name;
        document.getElementById('u_pic').innerText = user.first_name[0].toUpperCase();
        document.getElementById('u_id').innerText = user.id;

        try {
            const response = await fetch(`${BACKEND}/data?user_id=${user.id}`);
            const data = await response.json();
            
            // ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ß‡ßÄ‡¶∞‡ßá ‡¶ß‡ßÄ‡¶∞‡ßá ‡¶¨‡¶æ‡ßú‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® (Unique feel)
            animateValue("bal", parseFloat(document.getElementById('bal').innerText), data.balance, 1000);
            document.getElementById('ref').innerText = data.refs;
        } catch (e) {
            console.error("Fetch Error");
        }
    }

    function animateValue(id, start, end, duration) {
        let current = start;
        const range = end - start;
        const increment = end > start ? 0.1 : -0.1;
        const stepTime = Math.abs(Math.floor(duration / (range * 10)));
        const obj = document.getElementById(id);
        
        const timer = setInterval(() => {
            current += increment;
            obj.innerText = current.toFixed(2);
            if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                obj.innerText = end.toFixed(2);
                clearInterval(timer);
            }
        }, 10);
    }

    function watchAd() {
        if (typeof show_10603637 === 'function') {
            show_10603637().then(async () => {
                tg.MainButton.setText("Adding Points...").show();
                
                // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶è‡¶®‡ßç‡¶°‡ßá ‡¶∞‡¶ø‡ßü‡ßá‡¶≤ ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü
                await fetch(`${BACKEND}/update-balance`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ user_id: user.id, points: 5.00 })
                });

                tg.MainButton.hide();
                tg.showScanQrPopup({ text: "Success! Points added to your wallet." });
                setTimeout(() => { tg.closeScanQrPopup(); loadData(); }, 2000);
                
            }).catch(() => tg.showAlert("Ad not ready. Please try again."));
        }
    }

    function syncData() {
        const btn = document.querySelector('.btn-sync i');
        btn.style.animation = "fa-spin 1s infinite linear";
        loadData().then(() => {
            setTimeout(() => { btn.style.animation = "none"; }, 1000);
        });
    }

    function copyRef() {
        const link = `https://t.me/EarnQuick_Official_bot?start=${user.id}`;
        navigator.clipboard.writeText(link).then(() => tg.showPopup({ message: "Referral link copied to clipboard!" }));
    }

    loadData();
    // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß©‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü (Real-time sync)
    setInterval(loadData, 30000);
</script>

</body>
</html>
