<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EarnQuick Pro</title>
    <script src='//libtl.com/sdk.js' data-zone='10603637' data-sdk='show_10603637'></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root { --primary: #00f2fe; --bg: #0b1120; --card: #1e293b; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg); color: #fff; margin: 0; padding-bottom: 120px; }
        .page { display: none; padding: 20px; }
        .active { display: block; }
        .header { background: linear-gradient(135deg, #00f2fe, #0061ff); padding: 40px 20px; border-radius: 0 0 30px 30px; text-align: center; margin-bottom: 20px; }
        .user-circle { width: 80px; height: 80px; background: #001e3c; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px; border: 3px solid #fff; margin: 0 auto 10px; }
        .stats-box { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .stat-card { background: var(--card); padding: 20px; border-radius: 20px; text-align: center; border: 1px solid #334155; }
        .btn-main { background: var(--card); border: 1px solid #334155; padding: 15px; border-radius: 15px; width: 100%; margin-top: 15px; color: white; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .withdraw-input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 10px; border: none; background: #334155; color: white; box-sizing: border-box; }
        .navbar { position: fixed; bottom: 0; width: 100%; background: #0f172a; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #334155; }
        .nav-item { color: #64748b; font-size: 12px; text-align: center; }
        .nav-item.active { color: var(--primary); }
    </style>
</head>
<body>
    <div id="home" class="page active">
        <div class="header">
            <div class="user-circle">N</div>
            <h2 id="u_name">Najmul Hoque Forhad</h2>
            <small>Verified Member ‚úîÔ∏è</small>
        </div>
        <div class="stats-box">
            <div class="stat-card">üí∞ <span id="bal">0.00</span><br><small>Balance</small></div>
            <div class="stat-card">üë• <span id="ref">0</span><br><small>Referrals</small></div>
        </div>
        <button class="btn-main" onclick="watchAd()"><i class="fas fa-play-circle" style="color:#ff006e"></i> Watch Ad</button>
        <button class="btn-main" onclick="copyRef()"><i class="fas fa-user-plus" style="color:#00f2fe"></i> Invite Friends</button>
    </div>

    <div id="wallet" class="page">
        <h2 style="text-align:center">Withdraw Points</h2>
        <div class="stat-card">
            <h1 id="bal2">0.00</h1>
            <input type="number" id="phone" placeholder="Phone Number" class="withdraw-input">
            <input type="number" id="amount" placeholder="Min 1000 Pts" class="withdraw-input">
            <button onclick="submitWithdraw()" class="btn-main" style="background:var(--primary); color:#000">Submit Request</button>
        </div>
    </div>

    <div class="navbar">
        <div class="nav-item active" onclick="showPage('home', this)"><i class="fas fa-home"></i><br>Home</div>
        <div class="nav-item" onclick="showPage('wallet', this)"><i class="fas fa-wallet"></i><br>Withdraw</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const user = tg.initDataUnsafe.user || {id: 8145444675, first_name: "Admin"};
        const BACKEND = "https://earmquick-backend.onrender.com";

        function showPage(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            el.classList.add('active');
        }

        function load() {
            document.getElementById('u_name').innerText = user.first_name;
            fetch(`${BACKEND}/data?user_id=${user.id}&name=${user.first_name}`)
                .then(r => r.json()).then(d => {
                    document.getElementById('bal').innerText = d.balance.toFixed(2);
                    document.getElementById('bal2').innerText = d.balance.toFixed(2);
                    document.getElementById('ref').innerText = d.refs;
                });
        }

        function watchAd() {
            if (typeof show_10603637 === 'function') {
                show_10603637({ ymid: user.id }).then((ev) => {
                    if (ev.reward_event_type === "valued") {
                        fetch(`${BACKEND}/postback?user_id=${user.id}`).then(() => {
                            tg.showAlert("‡ß´ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá!"); load();
                        });
                    }
                });
            }
        }

        function copyRef() {
            const link = `https://t.me/EarnQuick_Official_bot?start=${user.id}`;
            navigator.clipboard.writeText(link).then(() => tg.showAlert("‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!"));
        }

        tg.ready(); tg.expand(); load();
    </script>
</body>
</html>
