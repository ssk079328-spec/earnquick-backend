<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EarnQuick Pro</title>
    
    <script src='//libtl.com/sdk.js' data-zone='10603637' data-sdk='show_10603637'></script>
    <script src='//libtl.com/sdk.js' data-zone='10603687' data-sdk='show_10603687'></script>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        :root { --primary: #00d2ff; --bg: #0b101a; --card: rgba(255, 255, 255, 0.08); }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #fff; margin: 0; padding-bottom: 100px; -webkit-user-select: none; }
        .header { padding: 40px 20px; text-align: center; background: linear-gradient(180deg, #1a2233, var(--bg)); border-radius: 0 0 50px 50px; }
        .user-pic { width: 85px; height: 85px; border-radius: 50%; border: 4px solid var(--primary); margin-bottom: 10px; }
        .balance-card { background: var(--card); margin: -30px 20px 20px; padding: 20px; border-radius: 30px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-around; text-align: center; }
        .balance-card b { font-size: 24px; color: var(--primary); display: block; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 10px 20px; }
        .menu-btn { background: var(--card); padding: 20px; border-radius: 25px; text-align: center; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; cursor: pointer; }
        .menu-btn:active { transform: scale(0.9); }
        .menu-btn i { font-size: 28px; margin-bottom: 8px; display: block; }
        #banner-ad-container { position: fixed; bottom: 15px; left: 5%; width: 90%; height: 60px; background: #000; border-radius: 20px; overflow: hidden; border: 1px solid var(--primary); }
    </style>
</head>
<body>

<div class="header">
    <img id="u_pic" src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="user-pic">
    <div style="font-size: 20px; font-weight: bold;" id="u_name">লোডিং...</div>
</div>

<div class="balance-card">
    <div><span>পয়েন্ট</span><b id="bal">0</b></div>
    <div><span>রেফার</span><b id="ref">0</b></div>
</div>

<div class="menu-grid">
    <div class="menu-btn" onclick="watchAd()" style="border-bottom: 4px solid #e91e63;"><i class="fas fa-play-circle" style="color: #e91e63;"></i>অ্যাড দেখুন</div>
    <div class="menu-btn" onclick="openW()" style="border-bottom: 4px solid #4caf50;"><i class="fas fa-wallet" style="color: #4caf50;"></i>উইথড্র</div>
    <div class="menu-btn" onclick="copyRef()" style="border-bottom: 4px solid #2196f3;"><i class="fas fa-share-alt" style="color: #2196f3;"></i>রেফার</div>
    <div class="menu-btn" onclick="location.reload()" style="border-bottom: 4px solid #ff9800;"><i class="fas fa-sync" style="color: #ff9800;"></i>রিফ্রেশ</div>
</div>

<div id="banner-ad-container"></div>

<script>
    const tg = window.Telegram.WebApp;
    const user = tg.initDataUnsafe.user;
    const BACKEND = "https://earnquick-backend.onrender.com";

    // ইন-অ্যাপ অ্যাড (স্মার্ট কন্ট্রোল)
    if(typeof show_10603687 === 'function') {
        show_10603687({ type: 'inApp', inAppSettings: { frequency: 1, capping: 0.2, interval: 60, timeout: 10, everyPage: false } });
    }

    async function loadData() {
        if(!user) return;
        document.getElementById('u_name').innerText = user.first_name;
        if(user.photo_url) document.getElementById('u_pic').src = user.photo_url;
        const r = await fetch(`${BACKEND}/data?user_id=${user.id}`);
        const d = await r.json();
        document.getElementById('bal').innerText = d.balance;
        document.getElementById('ref').innerText = d.refs;
    }

    function watchAd() {
        if (typeof show_10603637 === 'function') {
            show_10603637(user.id).then(() => {
                tg.showPopup({message: "অ্যাড দেখা সফল! পয়েন্ট প্রসেসিং হচ্ছে।"}, () => location.reload());
            }).catch(() => tg.showAlert("অ্যাড এই মুহূর্তে নেই।"));
        }
    }

    function copyRef() {
        const link = `https://t.me/EarnQuick_Official_bot?start=${user.id}`;
        navigator.clipboard.writeText(link).then(() => tg.showAlert("রেফার লিঙ্ক কপি হয়েছে!"));
    }

    function openW() {
        tg.showPopup({
            title: 'উইথড্র',
            message: 'উইথড্র রিকোয়েস্ট পাঠাতে বটের মেনু ব্যবহার করুন।',
            buttons: [{type: 'close'}]
        });
    }

    (function(s,u,z,p){s.src=u,s.setAttribute('data-zone',z),p.appendChild(s);})(document.createElement('script'),'https://alwingulla.com/tag.min.js',10603687,document.getElementById('banner-ad-container'));

    tg.ready(); tg.expand(); loadData();
</script>
</body>
</html>
