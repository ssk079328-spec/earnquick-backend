<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EarnQuick Pro</title>
    
    <script src='//libtl.com/sdk.js' data-zone='10441115' data-sdk='show_10441115'></script>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root { --bg: #0b101a; --card: #1a2233; --accent: #00d2ff; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #fff; margin: 0; padding-bottom: 30px; }
        .marquee { background: linear-gradient(90deg, #ff0055, #ff5e00); padding: 10px 0; font-weight: bold; overflow: hidden; white-space: nowrap; }
        .marquee span { display: inline-block; animation: scroll 20s linear infinite; }
        @keyframes scroll { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        .header { padding: 25px; text-align: center; background: linear-gradient(180deg, #1e293b, var(--bg)); }
        .stats { display: flex; gap: 10px; padding: 0 15px; margin-top: -15px; }
        .stat-box { flex: 1; background: var(--card); padding: 15px; border-radius: 15px; border: 1px solid #333; text-align: center; }
        .stat-box b { display: block; font-size: 22px; color: var(--accent); }
        .nav-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 15px; }
        .btn { border: none; border-radius: 12px; padding: 15px 5px; color: #fff; font-weight: bold; cursor: pointer; text-align: center; transition: 0.2s; }
        .btn:active { transform: scale(0.95); }
        .btn-bonus { background: #ff9800; } .btn-ad { background: #e91e63; }
        .btn-his { background: #607d8b; } .btn-wit { background: #4caf50; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 1000; align-items: center; justify-content: center; padding: 15px; }
        .modal-content { background: var(--card); width: 100%; max-height: 85vh; overflow-y: auto; padding: 20px; border-radius: 20px; border: 1px solid var(--accent); }
        input, select { width: 100%; padding: 12px; margin: 10px 0; border-radius: 10px; background: #000; color: #fff; border: 1px solid #444; box-sizing: border-box; }
        .item { background: #000; padding: 10px; border-radius: 10px; margin-bottom: 8px; border-left: 4px solid var(--accent); display: flex; justify-content: space-between; }
    </style>
</head>
<body>

<div class="marquee"><span>üì¢ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ü‡¶æ‡¶á‡¶Æ: ‡ßÆ‡¶ü‡¶æ-‡ßß‡ßß‡¶ü‡¶æ‡•§ ‡ß™‡ß¶‡ß¶‡ß¶ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü = ‡ß®‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ‡•§ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡ß®‡ß¶‡ß¶ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü‡•§ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®: ‡ß¶‡ßß‡ßØ‡ßß‡ß©‡ß¨‡ß®‡ßß‡ß´‡ßß‡ß¶</span></div>

<div class="header"><h3 id="u_name">‡¶≤‡ßã‡¶°‡¶ø‡¶Ç...</h3></div>

<div class="stats">
    <div class="stat-box">‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü<b id="bal">0</b></div>
    <div class="stat-box">‡¶∞‡ßá‡¶´‡¶æ‡¶∞<b id="ref">0</b></div>
</div>

<div class="nav-grid">
    <button class="btn btn-bonus" onclick="claimBonus()"><i class="fas fa-gift"></i> ‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏</button>
    <button class="btn btn-ad" onclick="watchAd()"><i class="fas fa-play"></i> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
    <button class="btn btn-his" onclick="openHistory()"><i class="fas fa-history"></i> ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡¶∞‡¶ø</button>
    <button class="btn btn-wit" onclick="openW()"><i class="fas fa-wallet"></i> ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞</button>
    <button class="btn" style="background:#2196f3;" onclick="copyRef()"><i class="fas fa-copy"></i> ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</button>
    <button id="adminBtn" class="btn" style="display:none; background:#673ab7;" onclick="openAdmin()"><i class="fas fa-user-shield"></i> ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</button>
</div>

<div id="modal" class="modal"><div id="modal-body" class="modal-content"></div></div>

<script>
    const tg = window.Telegram.WebApp; const user = tg.initDataUnsafe.user;
    const BACKEND = "https://earnquick-backend.onrender.com";
    const MY_ID = 8145444675;

    // ‡ßß. ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ
    if(typeof show_10441115 === 'function') {
        show_10441115({
          type: 'inApp',
          inAppSettings: { frequency: 2, capping: 0.1, interval: 30, timeout: 5, everyPage: false }
        });
    }

    if(user && user.id == MY_ID) document.getElementById('adminBtn').style.display = 'block';

    async function loadData() {
        const r = await fetch(`${BACKEND}/data?user_id=${user.id}`);
        const d = await r.json();
        document.getElementById('bal').innerText = d.balance;
        document.getElementById('ref').innerText = d.refs;
        document.getElementById('u_name').innerText = user.first_name;
    }

    // ‡ß®. ‡¶∞‡¶ø‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° (YMID ‡¶™‡¶æ‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
    function watchAd() {
        if (typeof show_10441115 === 'function') {
            show_10441115(user.id).then(async () => {
                // ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü
                await fetch(`${BACKEND}/add_point`, { 
                    method:'POST', 
                    headers:{'Content-Type':'application/json'}, 
                    body:JSON.stringify({user_id:user.id, point:5}) 
                });
                tg.showPopup({message:"‡ß´ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá!"}, () => location.reload());
            }).catch(e => tg.showAlert("‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ!"));
        } else {
            tg.showAlert("SDK ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø!");
        }
    }

    async function claimBonus() {
        const r = await fetch(`${BACKEND}/claim_bonus`, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({user_id:user.id}) });
        const d = await r.json(); tg.showAlert(d.message); if(d.success) location.reload();
    }

    function openHistory() {
        showModal('<h3>‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡ßá‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</h3><div id="list">‡¶≤‡ßã‡¶°‡¶ø‡¶Ç...</div>');
        fetch(`${BACKEND}/history?user_id=${user.id}`).then(r=>r.json()).then(data=>{
            document.getElementById('list').innerHTML = data.map(i=>`<div class="item"><div>${i.type}<br><small>${i.amount} Pts</small></div><div style="color:${i.status=='Success'?'#4af':'#fa0'}">${i.status}</div></div>`).join('') || '‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡ßá‡¶á‡•§';
        });
    }

    function openW() {
        showModal(`<h3>‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü</h3>
            <select id="m"><option value="bKash">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂</option><option value="Nagad">‡¶®‡¶ó‡¶¶</option><option value="Rocket">‡¶∞‡¶ï‡ßá‡¶ü</option></select>
            <input id="a" type="number" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡ß®‡ß¶-‡ß®‡ß´‡ß¶‡ß¶‡ß¶)">
            <input id="n" type="text" placeholder="‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞">
            <button class="btn" style="background:var(--accent); width:100%; color:#000;" onclick="sendW()">‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü</button>`);
    }

    function sendW() {
        const a = document.getElementById('a').value; const n = document.getElementById('n').value;
        if(a >= 20 && n) { tg.sendData(JSON.stringify({action:'withdraw', amt:a*200, num:n, method:document.getElementById('m').value})); closeModal(); }
        else tg.showAlert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®!");
    }

    function openAdmin() {
        showModal('<h3>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</h3><div id="aList">‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶°‡¶æ‡¶ü‡¶æ...</div>');
        fetch(`${BACKEND}/admin/all_data?admin_id=${user.id}`).then(r=>r.json()).then(d=>{
            let h = '<b>‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞‡¶æ‡¶≤:</b><br>';
            h += d.withdrawals.map(w=>`<div class="item">${w.method}: ${w.num} (${w.amt/200}TK)<br><button onclick="approve(${w.id})" style="background:green;border:none;color:#fff;border-radius:5px;padding:5px;">Approve</button></div>`).join('') || '‡¶®‡ßá‡¶á';
            h += '<br><b>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü:</b><br>';
            h += d.users.map(u=>`<div class="item" style="font-size:12px;">ID: ${u.id} | Bal: ${u.bal} | Ref: ${u.ref}</div>`).join('');
            document.getElementById('aList').innerHTML = h;
        });
    }

    function approve(id) { fetch(`${BACKEND}/admin/approve`, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({admin_id:user.id, w_id:id}) }).then(()=>openAdmin()); }
    function copyRef() { const i = document.createElement("input"); i.value=`https://t.me/EarnQuick_Official_bot?start=${user.id}`; document.body.appendChild(i); i.select(); document.execCommand("copy"); document.body.removeChild(i); tg.showAlert("‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!"); }
    function showModal(content) { document.getElementById('modal-body').innerHTML = content + '<button onclick="closeModal()" style="background:red;width:100%;padding:10px;border:none;color:#fff;border-radius:10px;margin-top:15px;">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>'; document.getElementById('modal').style.display='flex'; }
    function closeModal() { document.getElementById('modal').style.display='none'; }
    tg.ready(); tg.expand(); loadData();
</script>
</body>
</html>
